---
export interface Props {
  currentPage?: "home" | "menu" | "about" | "contact";
}

const { currentPage = "home" } = Astro.props;

const isActive = (page: string) => currentPage === page;
---

<nav class="bg-white shadow-md sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <div class="flex items-center">
        <a
          href="/"
          class="flex items-center hover:opacity-80 transition-opacity"
        >
          <img src="/logo.png" alt="YumYum" class="h-16 w-auto" />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex space-x-8">
        <a
          href="/"
          class={`font-medium transition-colors ${isActive("home") ? "text-accent-600" : "text-gray-700 hover:text-accent-600"}`}
          >Home</a
        >
        <a
          href="/menu"
          class={`font-medium transition-colors ${isActive("menu") ? "text-accent-600" : "text-gray-700 hover:text-accent-600"}`}
          >Menu</a
        >
        <a
          href="/about"
          class={`font-medium transition-colors ${isActive("about") ? "text-accent-600" : "text-gray-700 hover:text-accent-600"}`}
          >About</a
        >
        <a
          href="/contact"
          class={`font-medium transition-colors ${isActive("contact") ? "text-accent-600" : "text-gray-700 hover:text-accent-600"}`}
          >Contact</a
        >
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden text-primary-700 text-3xl focus:outline-none focus:text-accent-600 transition-colors"
        aria-label="Toggle menu"
      >
        ☰
      </button>
    </div>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu-overlay"
  class="fixed inset-0 bg-black/50 z-50 hidden"
  aria-hidden="true"
>
</div>

<!-- Mobile Menu Drawer -->
<div
  id="mobile-menu"
  class="fixed top-0 right-0 h-full w-64 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-60"
  role="dialog"
  aria-label="Mobile navigation"
>
  <div class="flex flex-col h-full">
    <!-- Close Button -->
    <div class="flex justify-end p-4 border-b border-gray-200">
      <button
        id="mobile-menu-close"
        class="text-primary-700 text-3xl focus:outline-none focus:text-accent-600 transition-colors"
        aria-label="Close menu"
      >
        ✕
      </button>
    </div>

    <!-- Mobile Navigation Links -->
    <nav class="flex flex-col p-6 space-y-4">
      <a
        href="/"
        class={`text-lg font-medium py-2 transition-colors ${isActive("home") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Home</a
      >
      <a
        href="/menu"
        class={`text-lg font-medium py-2 transition-colors ${isActive("menu") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Menu</a
      >
      <a
        href="/about"
        class={`text-lg font-medium py-2 transition-colors ${isActive("about") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >About</a
      >
      <a
        href="/contact"
        class={`text-lg font-medium py-2 transition-colors ${isActive("contact") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Contact</a
      >
    </nav>
  </div>
</div>

<script>
  // Mobile menu toggle functionality
  const menuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileMenuOverlay = document.getElementById("mobile-menu-overlay");
  const closeButton = document.getElementById("mobile-menu-close");

  function openMenu() {
    mobileMenu?.classList.remove("translate-x-full");
    mobileMenuOverlay?.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }

  function closeMenu() {
    mobileMenu?.classList.add("translate-x-full");
    mobileMenuOverlay?.classList.add("hidden");
    document.body.style.overflow = "";
  }

  menuButton?.addEventListener("click", openMenu);
  closeButton?.addEventListener("click", closeMenu);
  mobileMenuOverlay?.addEventListener("click", closeMenu);

  // Close menu when clicking navigation links
  const mobileNavLinks = mobileMenu?.querySelectorAll("a");
  mobileNavLinks?.forEach((link) => {
    link.addEventListener("click", closeMenu);
  });
</script>
