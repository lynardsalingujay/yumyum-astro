---
export interface Props {
  currentPage?: "cakes" | "desserts" | "bubble-tea" | "about" | "contact";
}

const { currentPage = "cakes" } = Astro.props;

const isActive = (page: string) => currentPage === page;
---

<nav class="bg-white shadow-md sticky top-0 z-50">
  <div
    class="mx-auto"
    style="width: 1440px; max-width: 1440px; height: 80px; padding: 16px 56px; display: flex; align-items: center;"
  >
    <div class="flex justify-between items-center w-full">
      <div class="flex items-center">
        <a
          href="/"
          class="flex items-center hover:opacity-80 transition-opacity"
        >
          <img src="/logo.png" alt="YumYum" class="h-16 w-auto" />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div
        class="hidden md:flex items-center"
        style="font-family: Poppins, sans-serif; gap: 80px;"
      >
        <a
          href="/cakes"
          class={`nav-link ${isActive("cakes") ? "nav-link-active" : ""}`}
          style="font-size: 16px; line-height: 22.4px; font-weight: 400; letter-spacing: 1.8px; text-align: left; text-transform: capitalize; white-space: nowrap; height: 48px; padding: 8px 0px; display: flex; align-items: center; cursor: pointer; color: #1a1a1a; position: relative;"
          ><span class="nav-text">Cakes</span></a
        >
        <a
          href="/desserts"
          class={`nav-link ${isActive("desserts") ? "nav-link-active" : ""}`}
          style="font-size: 16px; line-height: 22.4px; font-weight: 400; letter-spacing: 1.8px; text-align: left; text-transform: capitalize; white-space: nowrap; height: 48px; padding: 8px 0px; display: flex; align-items: center; cursor: pointer; color: #1a1a1a; position: relative;"
          ><span class="nav-text">Desserts</span></a
        >
        <a
          href="/bubble-tea"
          class={`nav-link ${isActive("bubble-tea") ? "nav-link-active" : ""}`}
          style="font-size: 16px; line-height: 22.4px; font-weight: 400; letter-spacing: 1.8px; text-align: left; text-transform: capitalize; white-space: nowrap; height: 48px; padding: 8px 0px; display: flex; align-items: center; cursor: pointer; color: #1a1a1a; position: relative;"
          ><span class="nav-text">Bubble Tea</span></a
        >
        <a
          href="/about"
          class={`nav-link ${isActive("about") ? "nav-link-active" : ""}`}
          style="font-size: 16px; line-height: 22.4px; font-weight: 400; letter-spacing: 1.8px; text-align: left; text-transform: capitalize; white-space: nowrap; height: 48px; padding: 8px 0px; display: flex; align-items: center; cursor: pointer; color: #1a1a1a; position: relative;"
          ><span class="nav-text">About</span></a
        >
        <a
          href="/contact"
          class={`nav-link ${isActive("contact") ? "nav-link-active" : ""}`}
          style="font-size: 16px; line-height: 22.4px; font-weight: 400; letter-spacing: 1.8px; text-align: left; text-transform: capitalize; white-space: nowrap; height: 48px; padding: 8px 0px; display: flex; align-items: center; cursor: pointer; color: #1a1a1a; position: relative;"
          ><span class="nav-text">Contact</span></a
        >
      </div>

      <!-- Right Side Utilities -->
      <div class="hidden md:flex items-center space-x-6">
        <!-- Search -->
        <div
          class="flex items-center space-x-2 px-4 py-2 rounded-md"
          style="background-color: #f5f5f5;"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            style="color: #666666;"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <input
            type="text"
            placeholder="Search"
            class="bg-transparent border-none outline-none text-sm"
            style="color: #666666; font-family: Poppins, sans-serif; width: 120px;"
            aria-label="Search"
          />
        </div>

        <!-- User Account -->
        <a
          href="/account"
          class="text-gray-700 hover:text-accent-600 transition-colors"
          aria-label="Account"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            ></path>
          </svg>
        </a>

        <!-- Shopping Cart -->
        <a
          href="/cart"
          class="relative text-gray-700 hover:text-accent-600 transition-colors"
          aria-label="Shopping cart"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
          </svg>
          <span
            class="absolute -top-2 -right-2 bg-gray-900 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"
            >0</span
          >
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden text-primary-700 text-3xl focus:outline-none focus:text-accent-600 transition-colors"
        aria-label="Toggle menu"
      >
        ☰
      </button>
    </div>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu-overlay"
  class="fixed inset-0 bg-black/50 z-50 hidden"
  aria-hidden="true"
>
</div>

<!-- Mobile Menu Drawer -->
<div
  id="mobile-menu"
  class="fixed top-0 right-0 h-full w-64 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-[60] opacity-100"
  role="dialog"
  aria-label="Mobile navigation"
  style="background-color: #ffffff;"
>
  <div class="flex flex-col h-full">
    <!-- Close Button -->
    <div class="flex justify-end p-4 border-b border-gray-200">
      <button
        id="mobile-menu-close"
        class="text-primary-700 text-3xl focus:outline-none focus:text-accent-600 transition-colors"
        aria-label="Close menu"
      >
        ✕
      </button>
    </div>

    <!-- Mobile Navigation Links -->
    <nav class="flex flex-col p-6 space-y-4">
      <a
        href="/cakes"
        class={`text-lg font-medium py-2 transition-colors ${isActive("cakes") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Cakes</a
      >
      <a
        href="/desserts"
        class={`text-lg font-medium py-2 transition-colors ${isActive("desserts") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Desserts</a
      >
      <a
        href="/bubble-tea"
        class={`text-lg font-medium py-2 transition-colors ${isActive("bubble-tea") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Bubble Tea</a
      >
      <a
        href="/about"
        class={`text-lg font-medium py-2 transition-colors ${isActive("about") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >About</a
      >
      <a
        href="/contact"
        class={`text-lg font-medium py-2 transition-colors ${isActive("contact") ? "text-accent-600" : "text-primary-700 hover:text-accent-600"}`}
        >Contact</a
      >

      <!-- Mobile Utilities -->
      <div class="border-t border-gray-200 pt-4 mt-4 space-y-4">
        <a
          href="/account"
          class="flex items-center space-x-3 text-lg font-medium py-2 text-primary-700 hover:text-accent-600 transition-colors"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            ></path>
          </svg>
          <span>Account</span>
        </a>
        <a
          href="/cart"
          class="flex items-center space-x-3 text-lg font-medium py-2 text-primary-700 hover:text-accent-600 transition-colors"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
          </svg>
          <span>Cart (0)</span>
        </a>
      </div>
    </nav>
  </div>
</div>

<script>
  // Mobile menu toggle functionality
  const menuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileMenuOverlay = document.getElementById("mobile-menu-overlay");
  const closeButton = document.getElementById("mobile-menu-close");

  function openMenu() {
    mobileMenu?.classList.remove("translate-x-full");
    mobileMenuOverlay?.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }

  function closeMenu() {
    mobileMenu?.classList.add("translate-x-full");
    mobileMenuOverlay?.classList.add("hidden");
    document.body.style.overflow = "";
  }

  menuButton?.addEventListener("click", openMenu);
  closeButton?.addEventListener("click", closeMenu);
  mobileMenuOverlay?.addEventListener("click", closeMenu);

  // Close menu when clicking navigation links
  const mobileNavLinks = mobileMenu?.querySelectorAll("a");
  mobileNavLinks?.forEach((link) => {
    link.addEventListener("click", closeMenu);
  });
</script>

<style>
  .nav-link {
    transition: color 0.3s ease;
  }

  .nav-text {
    position: relative;
    display: inline-block;
  }

  .nav-text::after {
    content: "";
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 0;
    height: 1px;
    background-color: #1a1a1a;
    transition: width 0.4s ease;
  }

  .nav-link:hover .nav-text::after {
    width: 100%;
  }

  .nav-link-active .nav-text::after {
    width: 100%;
  }

  .nav-link:hover {
    color: #000000;
  }
</style>
